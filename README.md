# Kinect 
kinectë¥¼ ì´ìš©í•œ ì›ê²© ëª¸ë¬´ê²Œ ì¸¡ì •

![Image](https://github.com/user-attachments/assets/b38e7d14-60fc-4619-b749-e27639dcd2e3)


## ğŸ›  ê°œë°œ í™˜ê²½
<div>
<img src="https://img.shields.io/badge/C%23-239120?style=flat&logo=csharp&logoColor=white"/>
<img src="https://img.shields.io/badge/Visual%20Studio-5C2D91?style=flat&logo=visualstudio&logoColor=white"/>
</div>
<br>

Kinect ê°œë°œ Tool Download
- Kinect for Windows SDK v1.8
- Kinect for Windows Developer Toolkit v1.8
  
Setting
- ì‹œì‘ > ëª¨ë“  í”„ë¡œê·¸ë¨ > Kinect for Windows SDK v1.8 > Kinect Studio 1.8.0 ì‹¤í–‰
- ì‹œì‘ > ëª¨ë“  í”„ë¡œê·¸ë¨ > Kinect for Windows SDK v1.8 > Developer Toolkit Browser v1.8.0(Kinect) ì‹¤í–‰


## ğŸ¥ DepthStream
- ì˜ìƒì˜ ëª¨ì–‘ì„ ì¸ì‹í•˜ê³  í¬ê¸°ì™€ ê±°ë¦¬ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ í”„ë¡œê·¸ë¨ì— ì‘ìš©, ì‚¬ìš© í•  ìˆ˜ ìˆë„ë¡ ì •ë³´ë¥¼ ì œê³µ.
- DepthImageStream í´ë˜ìŠ¤ë¡œ ì§€ì •ëœ DepthStream ì´ë¼ëŠ” í•„ë“œ ì‚¬ìš©.


### ğŸ“š DepthImageStream í´ë˜ìŠ¤
|ë©¤ë²„|ê¸°ëŠ¥|
|--------------|---------------------|
|Format|ëìŠ¤ ë°ì´í„°ë¥¼ ìœ„í•œ í¬ë§·ì„ ê°€ì ¸ì˜¤ê±°ë‚˜ ì§€ì •|
|MaxDepth|ìµœëŒ€ ëìŠ¤ ê°’|
|MinDepth|ìµœì†Œ ëìŠ¤ ê°’|
|NominalDiagonalFieldOfView|ëìŠ¤ ì¹´ë©”ë¼ì—ì„œ ë·°ì˜ ëª…ëª©ìƒ ëŒ€ê°ì„  í•„ë“œ|
|NominalFocalLengtInPixels|ëìŠ¤ ì¹´ë©”ë¼ì˜ ëª…ëª©ìƒ ì´ˆì  ê¸¸ì´|
|NominalHorizontalFieldOfView|ëìŠ¤ ì¹´ë©”ë¼ì—ì„œ ë·°ì˜ ìˆ˜í‰ì„  í•„ë“œ|
|NominalInverseFocalLengthInPixels|ëìŠ¤ ì¹´ë©”ë¼ì—ì„œ ì—­ ì´ˆì  ê¸¸ì´|
|NominalVerticalFieldOfView|ëìŠ¤ ì¹´ë©”ë¼ì—ì„œ ë·°ì˜ ëª…ëª©ìƒ ìˆ˜ì§ì„  í•„ë“œ|
|Range|ëìŠ¤ ë°ì´í„°ì˜ ë²”ìœ„ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ ì§€ì •|
|TooFarDepth|ê°€ì¥ ë©€ë¦¬ ë–¨ì–´ì§„ ìµœê³ ì˜ ëìŠ¤ ê°’|
|TooNearDepth|ê°€ì¥ ê°€ê¹Œì´ ìˆëŠ” ìµœëŒ€ ëìŠ¤ ê°’|
|UnknownDepth|ì‹¤ì œ ëìŠ¤ë¥¼ ì•Œ ìˆ˜ ì—†ì„ ë•Œ ì‚¬ìš©ëœ ëìŠ¤ ê°’|
|Enable|ì„¼ì„œì—ì„œ ëìŠ¤ ë°ì´í„°ë¥¼ ì‚¬ìš©. ì‘ë™ ì‹œì‘|
|OpenNextFrame|ëìŠ¤ìŠ¤íŠ¸ë¦¼ ì•ˆì—ì„œ ë‹¤ìŒ í”„ë ˆì„ ê°€ì ¸ì˜´|

### ğŸ¨ PixelFormats í´ë˜ìŠ¤
|ë©¤ë²„|ê¸°ëŠ¥|
|--------------|---------------------|
|Bgr101010|32BPP ë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹, íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 10BPPê°€ í• ë‹¹|
|Bgr24|24BPP ë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹, íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 8BPPê°€ í• ë‹¹|
|Bgr32|32BPP ì˜ sRGBí˜•ì‹, íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 8BPPê°€ í• ë‹¹|
|Bgr555|16BPP ë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹, íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 5BPPê°€ í• ë‹¹|
|Bgr565|16BPP ë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹, íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 5BPP, 6BPP, 5BPPê°€ í• ë‹¹|
|Bgra32|32BPP ë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹, íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 8BPPê°€ í• ë‹¹|
|BlackWhite|í”½ì…€ë‹¹ 1ë¹„íŠ¸ ë°ì´í„°ë¥¼ ê²€ì • ë˜ëŠ” í°ìƒ‰ìœ¼ë¡œ í‘œì‹œ|
|Cmyk32|32BPP ë¥¼ í‘œì‹œí•˜ëŠ” Cmyk32 í”½ì…€ í˜•ì‹, ë…¹ì²­, ìí™, ë…¸ë‘, ê²€ì •ì— 8BPP ì”© í• ë‹¹|
|Gray16|65536ê°€ì§€ì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 16BPP íšŒìƒ‰ì¡° ì±„ë„ì„ í‘œì‹œí•˜ëŠ” í˜•ì‹. ê°ë§ˆê°’ 1.0|
|Gray2|4ê°€ì§€ì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 2BPP íšŒìƒ‰ì¡° ì±„ë„ì„ í‘œì‹œí•˜ëŠ” Gray2 í”½ì…€ í˜•ì‹|
|Gray32Float|40ì–µê°€ì§€ ì´ìƒì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 32BPP íšŒìƒ‰ì¡° ì±„ë„ì„ í‘œì‹œ. ê°ë§ˆê°’ 1.0|
|Gray4|16ê°€ì§€ì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 4BPP íšŒìƒ‰ì¡° ì±„ë„ì„ í‘œì‹œí•˜ëŠ” Gray4 í”½ì…€ í˜•ì‹|
|Gray8|256ê°€ì§€ì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 8BPP íšŒìƒ‰ì¡° ì²´ë„ì„ í‘œì‹œí•˜ëŠ” Gray8 í”½ì…€ í˜•ì‹|
|Indexed1|2ê°€ì§€ ìƒ‰ìœ¼ë¡œ ìƒ‰ìƒì´ ì§€ì •ëœ ë¹„íŠ¸ë§µì„ ì§€ì •í•˜ëŠ” í”½ì…€ í˜•ì‹|
|Indexed2|4ê°€ì§€ ìƒ‰ìœ¼ë¡œ ìƒ‰ìƒì´ ì§€ì •ëœ ë¹„íŠ¸ë§µì„ ì§€ì •í•˜ëŠ” í”½ì…€ í˜•ì‹|
|Indexed4|16ê°€ì§€ ìƒ‰ìœ¼ë¡œ ìƒ‰ìƒì´ ì§€ì •ëœ ë¹„íŠ¸ë§µì„ ì§€ì •í•˜ëŠ” í”½ì…€ í˜•ì‹|
|Indexed8|256ê°€ì§€ ìƒ‰ìœ¼ë¡œ ìƒ‰ìƒì´ ì§€ì •ëœ ë¹„íŠ¸ë§µì„ ì§€ì •í•˜ëŠ” í”½ì…€ í˜•ì‹|
|Pbgra32|32BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 8BPPê°€ í• ë‹¹. ê° ìƒ‰ ì±„ë„ì—ëŠ” ì•ŒíŒŒ ê°’ì´ ë¯¸ë¦¬ ê³±í•´ì§|
|Prgba 128float|128BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 32BPPê°€ í• ë‹¹. ê° ìƒ‰ ì±„ë„ì—ëŠ” ì•ŒíŒŒ ê°’ì´ ë¯¸ë¦¬ ê³±í•´ì§. ê°ë§ˆê°’ 1.0|
|Prgba64|64BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 32BPPê°€ í• ë‹¹. ê° ìƒ‰ ì±„ë„ì—ëŠ” ì•ŒíŒŒ ê°’ì´ ë¯¸ë¦¬ ê³±í•´ì§. ê°ë§ˆê°’ 1.0|
|Rgb 128Float|128BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 32BPPì”© í• ë‹¹. ê°ë§ˆê°’ 1.0|
|Rgb24|24BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 8BPPì”© í• ë‹¹|
|Rgb48|48BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 8BPPì”© í• ë‹¹. ê°ë§ˆê°’ 1.0|
|Rgba 128Float|128BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. ê° ìƒ‰ ì±„ë„ì—ëŠ” 32BPPì”© í• ë‹¹. ê°ë§ˆê°’ 1.0|
|Rgba64|64BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 16BPPì”© í• ë‹¹. ê°ë§ˆê°’ 1.0|
|Cmyk32|32BPP ë¥¼ í‘œì‹œí•˜ëŠ” Cmyk32 í”½ì…€ í˜•ì‹, ë…¹ì²­, ìí™, ë…¸ë‘, ê²€ì •ì— 8BPP ì”© í• ë‹¹|
|Gray16|65536ê°€ì§€ì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 16BPP íšŒìƒ‰ì¡° ì±„ë„ì„ í‘œì‹œí•˜ëŠ” í˜•ì‹. ê°ë§ˆê°’ 1.0|
|Gray2|4ê°€ì§€ì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 2BPP íšŒìƒ‰ì¡° ì±„ë„ì„ í‘œì‹œí•˜ëŠ” Gray2 í”½ì…€ í˜•ì‹|
|Gray32Float|40ì–µê°€ì§€ ì´ìƒì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 32BPP íšŒìƒ‰ì¡° ì±„ë„ì„ í‘œì‹œ. ê°ë§ˆê°’ 1.0|
|Gray4|16ê°€ì§€ì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 4BPP íšŒìƒ‰ì¡° ì±„ë„ì„ í‘œì‹œí•˜ëŠ” Gray4 í”½ì…€ í˜•ì‹|
|Gray8|256ê°€ì§€ì˜ íšŒìƒ‰ì¡°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” 8BPP íšŒìƒ‰ì¡° ì²´ë„ì„ í‘œì‹œí•˜ëŠ” Gray8 í”½ì…€ í˜•ì‹|
|Indexed1|2ê°€ì§€ ìƒ‰ìœ¼ë¡œ ìƒ‰ìƒì´ ì§€ì •ëœ ë¹„íŠ¸ë§µì„ ì§€ì •í•˜ëŠ” í”½ì…€ í˜•ì‹|
|Indexed2|4ê°€ì§€ ìƒ‰ìœ¼ë¡œ ìƒ‰ìƒì´ ì§€ì •ëœ ë¹„íŠ¸ë§µì„ ì§€ì •í•˜ëŠ” í”½ì…€ í˜•ì‹|
|Indexed4|16ê°€ì§€ ìƒ‰ìœ¼ë¡œ ìƒ‰ìƒì´ ì§€ì •ëœ ë¹„íŠ¸ë§µì„ ì§€ì •í•˜ëŠ” í”½ì…€ í˜•ì‹|
|Indexed8|256ê°€ì§€ ìƒ‰ìœ¼ë¡œ ìƒ‰ìƒì´ ì§€ì •ëœ ë¹„íŠ¸ë§µì„ ì§€ì •í•˜ëŠ” í”½ì…€ í˜•ì‹|
|Pbgra32|32BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 8BPPê°€ í• ë‹¹. ê° ìƒ‰ ì±„ë„ì—ëŠ” ì•ŒíŒŒ ê°’ì´ ë¯¸ë¦¬ ê³±í•´ì§|
|Prgba 128float|128BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 32BPPê°€ í• ë‹¹. ê° ìƒ‰ ì±„ë„ì—ëŠ” ì•ŒíŒŒ ê°’ì´ ë¯¸ë¦¬ ê³±í•´ì§. ê°ë§ˆê°’ 1.0|
|Prgba64|64BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 32BPPê°€ í• ë‹¹. ê° ìƒ‰ ì±„ë„ì—ëŠ” ì•ŒíŒŒ ê°’ì´ ë¯¸ë¦¬ ê³±í•´ì§. ê°ë§ˆê°’ 1.0|
|Rgb 128Float|128BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 32BPPì”© í• ë‹¹. ê°ë§ˆê°’ 1.0|
|Rgb24|24BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 8BPPì”© í• ë‹¹|
|Rgb48|48BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•ì—ëŠ” 8BPPì”© í• ë‹¹. ê°ë§ˆê°’ 1.0|
|Rgba 128Float|128BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. ê° ìƒ‰ ì±„ë„ì—ëŠ” 32BPPì”© í• ë‹¹. ê°ë§ˆê°’ 1.0|
|Rgba64|64BPPë¥¼ ì‚¬ìš©í•˜ëŠ” sRGBí˜•ì‹. íŒŒë‘, ë…¹ìƒ‰, ë¹¨ê°•, ì•ŒíŒŒì—ëŠ” 16BPPì”© í• ë‹¹. ê°ë§ˆê°’ 1.0|

## ğŸ— ê°œë°œ ê³¼ì •
1. ëìŠ¤ìŠ¤íŠ¸ë¦¼ í…ŒìŠ¤íŠ¸
2. ì˜ìƒ ëª¨ë‹ˆí„° ì¶œë ¥
3. ì‚¬ìš©ì ì¸ë±ìŠ¤ ì¶”ì¶œ
4. ê±°ë¦¬ ì¸¡ì • 
5. ì‚¬ìš©ì ì €ì¥
6. ë©´ì  ì¸¡ì •

## âš™ï¸ ê°œì„ ì‚¬í•­ (kinectê°€ ì—†ì–´ ì •í™•í•œ ì¸¡ì • ë¶ˆê°€)
1. í‚¤ ì¸¡ì • ì¶”ê°€ â†’ skeletonstream ì‚¬ìš© (ì •í™• X - ìƒëŒ€ì )
```
   // í‚¤ ê³„ì‚° í•¨ìˆ˜
        double CalculateHeight(CameraSpacePoint head, CameraSpacePoint foot)
        {
            double heightInMeters = Math.Abs(head.Y - foot.Y);
            return heightInMeters * 100; // ë¯¸í„° -> ì„¼í‹°ë¯¸í„°ë¡œ ë³€í™˜
        }
```

2. ì •í™•ë„ ê°œì„  <br>
ê¸°ì¡´ ì½”ë“œ (ë©´ì  ì¸¡ì • - MainWindow.xaml.cs)
```
  if (IPixel > 0)
            {
                textBlock1.Text = string.Format("í”½ì…€ : {0}", IPixel);
                textBlock2.Text = string.Format("ê±°ë¦¬ : {0}", IDist / IPixel);

                float weight = (IPixel * IDist) / 1000000000f;
                textBlock3.Text = string.Format("ë¬´ê²Œ : {0:0} kg", weight);
            }
```
![Image](https://github.com/user-attachments/assets/b0b1fce3-4fdd-4364-915a-78e0511ea6cc)

ê°œì„ ì•ˆ (test - MainWindow.xaml.cs)
1. ê±°ë¦¬ ì œí•œ (3m)
2. ì‚¬ìš©ì ì „ì‹ ì´ ì•ˆë‚˜ì˜¤ë©´ ì¸¡ì • X (etc. ì‚¬ë¬¼ì— ì‚¬ìš©ì ì‹ ì²´ ì¼ë¶€ê°€ ê°€ë ¤ì§)
3. ~~ê²°ê³¼ë¥¼ ë³´ë©° ê°€ì¤‘ì¹˜ ë³€ê²½~~

ì „ì‹ ì´ ëª¨ë‘ ë‚˜ì˜¬ ë•Œ true return
```
bool fullBodyDetected = false;

void nui_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
{
    SkeletonFrame skeletonFrame = e.OpenSkeletonFrame();
    if (skeletonFrame == null) return;

    Skeleton[] skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
    skeletonFrame.CopySkeletonDataTo(skeletons);

    fullBodyDetected = false;

    foreach (Skeleton skeleton in skeletons)
    {
      if (skeleton.TrackingState == SkeletonTrackingState.Tracked)
      {
        // ìƒì²´ì™€ í•˜ì²´ê°€ ëª¨ë‘ ì¸ì‹ë˜ì—ˆëŠ”ì§€ í™•ì¸
        if (skeleton.Joints[JointType.Head].TrackingState == JointTrackingState.Tracked &&
            skeleton.Joints[JointType.ShoulderCenter].TrackingState == JointTrackingState.Tracked &&
            skeleton.Joints[JointType.HipCenter].TrackingState == JointTrackingState.Tracked)
        {
          fullBodyDetected = true;
          break;
        }
      }
    }
}
```

GetPlayer() ì— ì¡°ê±´ ì¶”ê°€
```
if (player == nPlayer) // í•´ë‹¹ í”Œë ˆì´ì–´ë§Œ ì²˜ë¦¬
{
    if (nDistance == 3000 && fullBodyDetected) // ì •í™•íˆ 3mì´ê³  ì „ì‹ ì´ ì¸ì‹ëœ ê²½ìš°ë§Œ ì¸¡ì •
    {
      IDist += nDistance;
      IPixel += 1;
      SetRGB(playerCoded, i32, 0xFF, 0xFF, 0xFF); // í°ìƒ‰ìœ¼ë¡œ í”½ì…€ í‘œì‹œ
    }
}
```
